randn('state', 12)
% data
n = 2;       % dimension
m = 500;    % number of samples
X = randn(m,n) + 1.5;
Y = randn(m,n) - 1.5;

gamma = 1;

% solve SVM

c_ = sparse(5508,1);
c_(5508) = 1;
b_ = sparse(4505,1);
b_(2004:2004) = 1;
b_(4005:4005) = 1;
A_ = sparse(4505, 5508);
A_(1:1, 1:1) = 1*ones(1, 1); A_(1:1, 2004:2004) = 1*speye(1, 1); A_(1:1, 5508:5508) = -1*speye(1, 1);
A_(2:2, 2005:2005) = gamma*speye(1, 1); A_(2:2, 2004:2004) = -1*speye(1, 1);
A_(3:3, 2005:2005) = -1*ones(1, 1); A_(3:3, 2006:2505) = 1*ones(1, 500);
A_(4:503, 4:503) = 1*speye(500, 500); A_(4:503, 1004:1503) = 1*speye(500, 500); A_(4:503, 2006:2505) = -1*speye(500, 500);
A_(504:1003, 2506:3005) = -1*speye(500, 500); A_(504:1003, 4:503) = 1*speye(500, 500); A_(504:1003, 504:1003) = -1*speye(500, 500);
A_(1004:1503, 3006:3006) = 1*ones(500, 1); A_(1004:1503, 3007:3506) = 1*speye(500, 500); A_(1004:1503, 2506:3005) = -1*speye(500, 500);
A_(1504:2003, 3507:3507) = 1*ones(500, 1); A_(1504:2003, 3508:4007) = -1*speye(500, 500); A_(1504:2003, 3007:3506) = -1*speye(500, 500);
A_(2004:2004, 3507:3507) = 1*speye(1, 1);
A_(2005:2504, 2:3) = X; A_(2005:2504, 3508:4007) = -1*speye(500, 500);
A_(2505:3004, 4008:4507) = -1*speye(500, 500); A_(2505:3004, 1004:1503) = 1*speye(500, 500); A_(2505:3004, 1504:2003) = -1*speye(500, 500);
A_(3005:3504, 3006:3006) = -1*ones(500, 1); A_(3005:3504, 4508:5007) = 1*speye(500, 500); A_(3005:3504, 4008:4507) = -1*speye(500, 500);
A_(3505:4004, 3507:3507) = 1*ones(500, 1); A_(3505:4004, 5008:5507) = 1*speye(500, 500); A_(3505:4004, 4508:5007) = -1*speye(500, 500);
A_(4005:4005, 3507:3507) = 1*speye(1, 1);
A_(4006:4505, 2:3) = Y; A_(4006:4505, 5008:5507) = -1*speye(500, 500);
G_ = sparse(2003, 5508);
G_(1:1:500, 4:503) = -speye(500, 500);
G_(501:1:1000, 504:1003) = -speye(500, 500);
G_(1001:1:1500, 1004:1503) = -speye(500, 500);
G_(1501:1:2000, 1504:2003) = -speye(500, 500);
G_(2001:1:2001, 1:1) = -speye(1, 1);
G_(2002:1:2003, 2:3) = -speye(2, 2);
h_ = zeros(2003, 1);
dims.q = [3];
dims.l = 2000;
[x_codegen, y_, info_] = ecos(full(c_), G_, h_, dims, A_, full(b_));
t0 = x_codegen(1:1);
a = x_codegen(2:3);
t6 = x_codegen(4:503);
t6z0 = x_codegen(504:1003);
t11 = x_codegen(1004:1503);
t11z0 = x_codegen(1504:2003);
t2 = x_codegen(2004:2004);
t12 = x_codegen(2005:2005);
t7 = x_codegen(2006:2505);
t5 = x_codegen(2506:3005);
b = x_codegen(3006:3006);
t3 = x_codegen(3007:3506);
p1 = x_codegen(3507:3507);
t4 = x_codegen(3508:4007);
t10 = x_codegen(4008:4507);
t8 = x_codegen(4508:5007);
t9 = x_codegen(5008:5507);
t1 = x_codegen(5508:5508);
ecos_optval = 1*info_.pcost;

ecos_optval